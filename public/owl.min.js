!function(e){"use strict";class t{constructor(){this.subscriptions={}}on(e,t,n){if(!n)throw new Error("Missing callback");this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push({owner:t,callback:n})}off(e,t){const n=this.subscriptions[e];n&&(this.subscriptions[e]=n.filter(e=>e.owner!==t))}trigger(e,...t){const n=this.subscriptions[e]||[];for(let e=0,o=n.length;e<o;e++){const o=n[e];o.callback.call(o.owner,...t)}}clear(){this.subscriptions={}}}const n=["push","pop","shift","unshift","splice","sort","reverse"],o=n.length,r=Array.prototype,i=Object.create(r);for(let e=0;e<o;e++){const t=n[e],o=r[t];i[t]=function(...e){if(!this.__observer__.allowMutations)throw new Error('Array cannot be changed here")');this.__observer__.rev++,this.__observer__.notifyChange(),this.__owl__.rev++;let n,r=this;do{r.__owl__.deepRev++}while(r=r.__owl__.parent);switch(t){case"push":case"unshift":n=e;break;case"splice":n=e.slice(2)}if(n)for(let e=0,t=n.length;e<t;e++)this.__observer__.observe(n[e],this);return o.call(this,...e)}}class s{constructor(){this.rev=1,this.allowMutations=!0,this.dirty=!1}static set(e,t,n){if(!e.__owl__)throw Error("`Observer.set()` can only be called with observed Objects or Arrays");e.__owl__.observer.set(e,t,n)}static delete(e,t){if(!e.__owl__)throw Error("`Observer.delete()` can only be called with observed Objects");e.__owl__.observer.delete(e,t)}notifyCB(){}notifyChange(){this.dirty=!0,Promise.resolve().then(()=>{this.dirty&&(this.dirty=!1,this.notifyCB())})}observe(e,t){null!==e&&"object"==typeof e&&("__owl__"in e?e.__owl__.parent=t:Array.isArray(e)?this._observeArr(e,t):this._observeObj(e,t))}set(e,t,n){t in e&&!1===Object.getOwnPropertyDescriptor(e,t).configurable?e[t]=n:(this._addProp(e,t,n),this._updateRevNumber(e)),this.notifyChange()}delete(e,t){delete e[t],this._updateRevNumber(e),this.notifyChange()}_observeObj(e,t){e.__owl__={rev:this.rev,deepRev:this.rev,parent:t,observer:this},Object.defineProperty(e,"__owl__",{enumerable:!1});for(let t in e)this._addProp(e,t,e[t])}_observeArr(e,t){e.__owl__={rev:this.rev,deepRev:this.rev,parent:t,observer:this},Object.defineProperty(e,"__owl__",{enumerable:!1}),e.__proto__=Object.create(i),e.__proto__.__observer__=this;for(let t=0,n=e.length;t<n;t++)this.observe(e[t],e)}_addProp(e,t,n){var o=this;Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:()=>n,set(r){if(r!==n){if(!o.allowMutations)throw new Error(`Observed state cannot be changed here! (key: "${t}", val: "${r}")`);o._updateRevNumber(e),n=r,o.observe(r,e),o.notifyChange()}}}),this.observe(n,e)}_updateRevNumber(e){this.rev++,e.__owl__.rev++;let t=e;do{t.__owl__.deepRev++}while((t=t.__owl__.parent)&&t!==e)}}const a="true,false,NaN,null,undefined,debugger,console,window,in,instanceof,new,function,return,this,typeof,eval,void,Math,RegExp,Array,Object,Date".split(","),l={and:"&&",or:"||",gt:">",gte:">=",lt:"<",lte:"<="},d={"{":"LEFT_BRACE","}":"RIGHT_BRACE","[":"LEFT_BRACKET","]":"RIGHT_BRACKET",":":"COLON",",":"COMMA","(":"LEFT_PAREN",")":"RIGHT_PAREN"},c=".,===,==,+,!==,!=,!,||,&&,>=,>,<=,<,?,-,*,/,%".split(",");const u=[function(e){let t=e[0],n=t;if("'"!==t&&'"'!==t)return!1;let o,r=1;for(;e[r]&&e[r]!==n;){if(t+=o=e[r],"\\"===o){if(!(o=e[++r]))throw new Error("Invalid expression");t+=o}r++}if(e[r]!==n)throw new Error("Invalid expression");return{type:"VALUE",value:t+=n}},function(e){let t=e[0];if(t&&t.match(/[0-9]/)){let n=1;for(;e[n]&&e[n].match(/[0-9]|\./);)t+=e[n],n++;return{type:"VALUE",value:t}}return!1},function(e){let t=e[0];if(t&&t.match(/[a-zA-Z_\$]/)){let n=1;for(;e[n]&&e[n].match(/\w/);)t+=e[n],n++;return t in l?{type:"OPERATOR",value:l[t],size:t.length}:{type:"SYMBOL",value:t}}return!1},function(e){const t=e[0];return!!(t&&t in d)&&{type:d[t],value:t}},function(e){for(let t of c)if(e.startsWith(t))return{type:"OPERATOR",value:t};return!1}];function h(e,t){const n=function(e){const t=[];let n=!0;for(;n;)if(e=e.trim()){for(let o of u)if(n=o(e)){t.push(n),e=e.slice(n.size||n.value.length);break}}else n=!1;if(e.length)throw new Error(`Tokenizer error: could not tokenize "${e}"`);return t}(e);let o="";for(let e=0;e<n.length;e++){let r=n[e];if("SYMBOL"===r.type&&!a.includes(r.value)){let o=!0,i=n[e-1];if(i)if("OPERATOR"===i.type&&"."===i.value)o=!1;else if("LEFT_BRACE"===i.type||"COMMA"===i.type){let t=n[e+1];t&&"COLON"===t.type&&(o=!1)}o&&(r.value in t&&"id"in t[r.value]?r.value=t[r.value].id:r.value=`context['${r.value}']`)}o+=r.value}return o}class p{constructor(e){this.nextID=1,this.code=[],this.variables={},this.escaping=!1,this.parentNode=null,this.parentTextNode=null,this.rootNode=null,this.indentLevel=0,this.shouldDefineOwner=!1,this.shouldDefineParent=!1,this.shouldDefineQWeb=!1,this.shouldDefineUtils=!1,this.shouldDefineResult=!1,this.shouldProtectContext=!1,this.shouldTrackScope=!1,this.inLoop=!1,this.inPreTag=!1,this.allowMultipleRoots=!1,this.hasParentWidget=!1,this.scopeVars=[],this.rootContext=this,this.templateName=e||"noname",this.addLine("var h = this.h;")}generateID(){return this.rootContext.nextID++}generateCode(){if(this.shouldTrackScope&&this.scopeVars.length){for(let e of this.scopeVars.reverse()){let{index:t,key:n,indent:o}=e;const r=new Array(o+2).join("    ");this.code.splice(t+1,0,r+`scope.${n} = context.${n};`)}this.code.unshift("    const scope = Object.create(null);")}return this.shouldProtectContext&&this.code.unshift("    context = Object.create(context);"),this.shouldDefineResult&&this.code.unshift("    let result;"),this.shouldDefineOwner&&this.code.unshift("    let owner = context;"),this.shouldDefineParent&&(this.hasParentWidget?this.code.unshift("    let parent = extra.parent;"):this.code.unshift("    let parent = context;")),this.shouldDefineQWeb&&this.code.unshift("    let QWeb = this.constructor;"),this.shouldDefineUtils&&this.code.unshift("    let utils = this.constructor.utils;"),this.code}withParent(e){if(!this.allowMultipleRoots&&this===this.rootContext&&(this.parentNode||this.parentTextNode))throw new Error("A template should not have more than one root node");return this.rootContext.rootNode||(this.rootContext.rootNode=e),this.subContext("parentNode",e)}subContext(e,t){const n=Object.create(this);return n[e]=t,n}indent(){this.indentLevel++}dedent(){this.indentLevel--}addLine(e){const t=new Array(this.indentLevel+2).join("    ");return this.code.push(t+e),this.code.length-1}addToScope(e,t){const n=this.addLine(`context.${e} = ${t};`);this.rootContext.scopeVars.push({index:n,key:e,indent:this.indentLevel})}addIf(e){this.addLine(`if (${e}) {`),this.indent()}addElse(){this.dedent(),this.addLine("} else {"),this.indent()}closeIf(){this.dedent(),this.addLine("}")}getValue(e){return e in this.variables?this.getValue(this.variables[e]):e}formatExpression(e){return h(e,this.variables)}interpolate(e){let t=e.match(/\{\{.*?\}\}/g);return t&&t[0].length===e.length?`(${this.formatExpression(e.slice(2,-2))})`:"`"+e.replace(/\{\{.*?\}\}/g,e=>"${"+this.formatExpression(e.slice(2,-2))+"}")+"`"}}function f(e,t){var n,o,r=t.elm,i=e.data.props,s=t.data.props;if((i||s)&&i!==s){for(n in i=i||{},s=s||{},i)s[n]||delete r[n];for(n in s)o=s[n],i[n]===o||"value"===n&&r[n]===o||(r[n]=o)}}const _={create:f,update:f};function m(e,t){var n=e.type,o=t.data.on;o&&o[n]&&function e(t,n,o){if("function"==typeof t)t.call(n,o,n);else if("object"==typeof t)if("function"==typeof t[0])if(2===t.length)t[0].call(n,t[1],o,n);else{var r=t.slice(1);r.push(o),r.push(n),t[0].apply(n,r)}else for(let r=0,i=t.length;r<i;r++)e(t[r],n,o)}(o[n],t,e)}function v(e,t){var n,o=e.data.on,r=e.listener,i=e.elm,s=t&&t.data.on,a=t&&t.elm;if(o!==s){if(o&&r)if(s)for(n in o)s[n]||i.removeEventListener(n,r,!1);else for(n in o)i.removeEventListener(n,r,!1);if(s){var l=t.listener=e.listener||function e(t){m(t,e.vnode)};if(l.vnode=t,o)for(n in s)o[n]||a.addEventListener(n,l,!1);else for(n in s)a.addEventListener(n,l,!1)}}}const $={create:v,update:v,destroy:v},g="http://www.w3.org/1999/xlink",w="http://www.w3.org/XML/1998/namespace",b=58,x=120;function y(e,t){var n,o=t.elm,r=e.data.attrs,i=t.data.attrs;if((r||i)&&r!==i){for(n in r=r||{},i=i||{}){const e=i[n];r[n]!==e&&(!0===e?o.setAttribute(n,""):!1===e?o.removeAttribute(n):n.charCodeAt(0)!==x?o.setAttribute(n,e):n.charCodeAt(3)===b?o.setAttributeNS(w,n,e):n.charCodeAt(5)===b?o.setAttributeNS(g,n,e):o.setAttribute(n,e))}for(n in r)n in i||o.removeAttribute(n)}}const N={create:y,update:y};function L(e,t){var n,o,r,i=e.data.class,s=t.data.class;if((i||s)&&i!==s){for(o in i=i||{},s=s||{},r=t.elm,i)s[o]||r.classList.remove(o);for(o in s)(n=s[o])!==i[o]&&r.classList[n?"add":"remove"](o)}}const E={create:L,update:L};function C(e,t,n,o,r){return{sel:e,data:t,children:n,text:o,elm:r,key:void 0===t?void 0:t.key}}function I(e){return void 0===e}function D(e){return void 0!==e}const A=C("",{},[],void 0,void 0);function P(e,t){return e.key===t.key&&e.sel===t.sel}function T(e,t,n){let o,r,i,s={};for(o=t;o<=n;++o)null!=(i=e[o])&&void 0!==(r=i.key)&&(s[r]=o);return s}const O=["create","update","remove","destroy","pre","post"];const k=Array.isArray;function j(e){return"string"==typeof e||"number"==typeof e}const S={createElement:function(e){return document.createElement(e)},createElementNS:function(e,t){return document.createElementNS(e,t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},getTextContent:function(e){return e.textContent},isElement:function(e){return 1===e.nodeType},isText:function(e){return 3===e.nodeType},isComment:function(e){return 8===e.nodeType}};function M(e,t,n){var o,r,i,s,a={};if(void 0!==n?(a=t,k(n)?o=n:j(n)?r=n:n&&n.sel&&(o=[n])):void 0!==t&&(k(t)?o=t:j(t)?r=t:t&&t.sel?o=[t]:a=t),void 0!==o)for(i=0,s=o.length;i<s;++i)j(o[i])&&(o[i]=C(void 0,void 0,void 0,o[i],void 0));return"s"!==e[0]||"v"!==e[1]||"g"!==e[2]||3!==e.length&&"."!==e[3]&&"#"!==e[3]||function e(t,n,o){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==o&&void 0!==n)for(let t=0,o=n.length;t<o;++t){let o=n[t].data;void 0!==o&&e(o,n[t].children,n[t].sel)}}(a,o,e),C(e,a,o,r,void 0)}const R=function(e,t){let n,o,r={};const i=void 0!==t?t:S;for(n=0;n<O.length;++n)for(r[O[n]]=[],o=0;o<e.length;++o){const t=e[o][O[n]];void 0!==t&&r[O[n]].push(t)}function s(e){const t=e.id?"#"+e.id:"",n=e.className?"."+e.className.split(" ").join("."):"";return C(i.tagName(e).toLowerCase()+t+n,{},[],void 0,e)}function a(e,t){return function(){if(0==--t){const t=i.parentNode(e);i.removeChild(t,e)}}}function l(e,t){let n,o,s=e.data;void 0!==s&&D(n=s.hook)&&D(n=n.init)&&(n(e),s=e.data);let a=e.children,d=e.sel;if("!"===d)I(e.text)&&(e.text=""),e.elm=i.createComment(e.text);else if(void 0!==d){const c=d.indexOf("#"),u=d.indexOf(".",c),h=c>0?c:d.length,p=u>0?u:d.length,f=-1!==c||-1!==u?d.slice(0,Math.min(h,p)):d,_=e.elm=D(s)&&D(n=s.ns)?i.createElementNS(n,f):i.createElement(f);for(h<p&&_.setAttribute("id",d.slice(h+1,p)),u>0&&_.setAttribute("class",d.slice(p+1).replace(/\./g," ")),n=0,o=r.create.length;n<o;++n)r.create[n](A,e);if(k(a))for(n=0,o=a.length;n<o;++n){const e=a[n];null!=e&&i.appendChild(_,l(e,t))}else j(e.text)&&i.appendChild(_,i.createTextNode(e.text));D(n=e.data.hook)&&(n.create&&n.create(A,e),n.insert&&t.push(e))}else e.elm=i.createTextNode(e.text);return e.elm}function d(e,t,n,o,r,s){for(;o<=r;++o){const r=n[o];null!=r&&i.insertBefore(e,l(r,s),t)}}function c(e){let t,n,o,i,s=e.data;if(void 0!==s){for(D(t=s.hook)&&D(t=t.destroy)&&t(e),t=0,n=r.destroy.length;t<n;++t)r.destroy[t](e);if(void 0!==e.children)for(o=0,i=e.children.length;o<i;++o)null!=(t=e.children[o])&&"string"!=typeof t&&c(t)}}function u(e,t,n,o){for(;n<=o;++n){let o,s,l,d,u=t[n];if(null!=u)if(D(u.sel)){for(c(u),l=r.remove.length+1,d=a(u.elm,l),o=0,s=r.remove.length;o<s;++o)r.remove[o](u,d);D(o=u.data)&&D(o=o.hook)&&D(o=o.remove)?o(u,d):d()}else i.removeChild(e,u.elm)}}function h(e,t,n){let o,s,a;D(o=t.data)&&D(a=o.hook)&&D(o=a.prepatch)&&o(e,t);const c=t.elm=e.elm;let p=e.children,f=t.children;if(e!==t){if(void 0!==t.data){for(o=0,s=r.update.length;o<s;++o)r.update[o](e,t);D(o=t.data.hook)&&D(o=o.update)&&o(e,t)}I(t.text)?D(p)&&D(f)?p!==f&&function(e,t,n,o){let r,s,a,c,p=0,f=0,_=t.length-1,m=t[0],v=t[_],$=n.length-1,g=n[0],w=n[$];for(;p<=_&&f<=$;)null==m?m=t[++p]:null==v?v=t[--_]:null==g?g=n[++f]:null==w?w=n[--$]:P(m,g)?(h(m,g,o),m=t[++p],g=n[++f]):P(v,w)?(h(v,w,o),v=t[--_],w=n[--$]):P(m,w)?(h(m,w,o),i.insertBefore(e,m.elm,i.nextSibling(v.elm)),m=t[++p],w=n[--$]):P(v,g)?(h(v,g,o),i.insertBefore(e,v.elm,m.elm),v=t[--_],g=n[++f]):(void 0===r&&(r=T(t,p,_)),I(s=r[g.key])?(i.insertBefore(e,l(g,o),m.elm),g=n[++f]):((a=t[s]).sel!==g.sel?i.insertBefore(e,l(g,o),m.elm):(h(a,g,o),t[s]=void 0,i.insertBefore(e,a.elm,m.elm)),g=n[++f]));(p<=_||f<=$)&&(p>_?d(e,c=null==n[$+1]?null:n[$+1].elm,n,f,$,o):u(e,t,p,_))}(c,p,f,n):D(f)?(D(e.text)&&i.setTextContent(c,""),d(c,null,f,0,f.length-1,n)):D(p)?u(c,p,0,p.length-1):D(e.text)&&i.setTextContent(c,""):e.text!==t.text&&(D(p)&&u(c,p,0,p.length-1),i.setTextContent(c,t.text)),D(a)&&D(o=a.postpatch)&&o(e,t)}}return function(e,t){let n,o,a,d;const c=[];for(n=0,o=r.pre.length;n<o;++n)r.pre[n]();for(function(e){return void 0!==e.sel}(e)||(e=s(e)),P(e,t)?h(e,t,c):(a=e.elm,d=i.parentNode(a),l(t,c),null!==d&&(i.insertBefore(d,t.elm,i.nextSibling(a)),u(d,[e],0,0))),n=0,o=c.length;n<o;++n)c[n].data.hook.insert(c[n]);for(n=0,o=r.post.length;n<o;++n)r.post[n]();return t}}([$,N,_,E]),U=["input","textarea","button","select","option","optgroup"],W=/[\r\n]/,B=/\s+/g,V={create:"(_, n)",insert:"vn",remove:"(vn, rm)"},H={toObj(e){if("string"==typeof e){if(!(e=e.trim()))return{};let t=e.split(/\s+/),n={};for(let e=0;e<t.length;e++)n[t[e]]=!0;return n}return e},shallowEqual(e,t){for(let n in e)if(e[n]!==t[n])return!1;return!0}};function q(e){const t=(new DOMParser).parseFromString(e,"text/xml");if(t.getElementsByTagName("parsererror").length){let n="Invalid XML in template.";const o=t.getElementsByTagName("parsererror")[0].textContent;if(o){n+="\nThe parser has produced the following error message:\n"+o;const t=/\d+/g,r=t.exec(o);if(r){const i=Number(r[0]),s=e.split("\n")[i-1],a=t.exec(o);if(s&&a){const e=Number(a[0])-1;s[e]&&(n+=`\nThe error might be located at xml line ${i} column ${e}\n`+`${s}\n${"-".repeat(e-1)}^`)}}}throw new Error(n)}return t}let z=1;class F extends t{constructor(e){super(),this.templates={},this.h=M,this.id=z++,this.slots={},this.nextSlotId=1,e&&this.addTemplates(e)}static addDirective(e){if(e.name in F.DIRECTIVE_NAMES)throw new Error(`Directive "${e.name} already registered`);F.DIRECTIVES.push(e),F.DIRECTIVE_NAMES[e.name]=1,F.DIRECTIVES.sort((e,t)=>e.priority-t.priority),e.extraNames&&e.extraNames.forEach(e=>F.DIRECTIVE_NAMES[e]=1)}static register(e,t){if(F.components[e])throw new Error(`Component '${e}' has already been registered`);F.components[e]=t}addTemplate(e,t,n){if(n&&e in this.templates)return;const o=q(t);if(!o.firstChild)throw new Error("Invalid template (should not be empty)");this._addTemplate(e,o.firstChild)}addTemplates(e){const t=q(e).getElementsByTagName("templates")[0];if(t)for(let e of t.children){const t=e.getAttribute("t-name");this._addTemplate(t,e)}}_addTemplate(e,t){if(e in this.templates)throw new Error(`Template ${e} already defined`);this._processTemplate(t);const n={elem:t,fn:(o,r)=>{const i=this._compile(e,t);return n.fn=i,i.call(this,o,r)}};this.templates[e]=n}_processTemplate(e){let t=e.querySelectorAll("[t-elif], [t-else]");for(let e=0,n=t.length;e<n;e++){let n=t[e],o=n.previousElementSibling,r=function(e){return o.getAttribute(e)},i=function(e){return+!!n.getAttribute(e)};if(!o||!r("t-if")&&!r("t-elif"))throw new Error("t-elif and t-else directives must be preceded by a t-if or t-elif directive");{if(r("t-foreach"))throw new Error("t-if cannot stay at the same level as t-foreach when using t-elif or t-else");if(["t-if","t-elif","t-else"].map(i).reduce(function(e,t){return e+t})>1)throw new Error("Only one conditional branching directive is allowed per node");let e;for(;(e=n.previousSibling)!==o;){if(e.nodeValue.trim().length)throw new Error("text is not allowed between branching directives");e.remove()}}}}render(e,t={},n=null){const o=this.templates[e];if(!o)throw new Error(`Template ${e} does not exist`);return o.fn.call(this,t,n)}renderToString(e,t={}){const n=this.render(e,t);if(void 0===n.sel)return n.text;const o=document.createElement(n.sel);return R(o,n).elm.outerHTML}_compile(e,t,n){const o=t.attributes.hasOwnProperty("t-debug"),r=new p(e);if(n){r.variables=Object.create(n.variables),r.nextID=n.parentNode+1,r.parentNode=n.parentNode,r.allowMultipleRoots=!0,r.hasParentWidget=!0,r.addLine(`let c${r.parentNode} = extra.parentNode;`);for(let e in n.variables){let t=n.variables[e];t.id&&r.addLine(`let ${t.id} = extra.vars.${t.id}`)}}if(n&&r.addLine("    Object.assign(context, extra.scope);"),this._compileNode(t,r),!n)if(r.shouldDefineResult)r.addLine("return result;");else{if(!r.rootNode)throw new Error(`A template should have one root node (${r.templateName})`);r.addLine(`return vn${r.rootNode};`)}let i,s=r.generateCode();try{i=new Function("context","extra",s.join("\n"))}catch(e){const t=r.templateName.replace(/`/g,"'");throw console.groupCollapsed(`Invalid Code generated by ${t}`),console.warn(s.join("\n")),console.groupEnd(),new Error(`Invalid generated code while compiling template '${t}': ${e.message}`)}if(o){const t=this.templates[e];if(t){const e=`Template: ${t.elem.outerHTML}\nCompiled code:\n${i.toString()}`;console.log(e)}}return i}_compileNode(e,t){if(!(e instanceof Element)){let n=e.textContent;if(!t.inPreTag){if(W.test(n)&&!n.trim())return;n=n.replace(B," ")}if(t.parentNode)t.addLine(`c${t.parentNode}.push({text: \`${n}\`});`);else if(t.parentTextNode)t.addLine(`vn${t.parentTextNode}.text += \`${n}\`;`);else{let e=t.generateID();t.addLine(`var vn${e} = {text: \`${n}\`};`),t.rootContext.rootNode=e,t.rootContext.parentTextNode=e}return}const n=e.tagName[0];n===n.toUpperCase()&&e.setAttribute("t-component",e.tagName);const o=e.attributes,r=[];let i=!1;for(let e=0;e<o.length;e++){let t=o[e].name;if(t.startsWith("t-")){if(!(t.slice(2).split(/-|\./)[0]in F.DIRECTIVE_NAMES))throw new Error(`Unknown QWeb directive: '${t}'`)}}const s=F.DIRECTIVES.length,a=o.length;for(let e=0;e<s;e++){let t,n,s=F.DIRECTIVES[e];for(let e=0;e<a;e++){const a=o[e].name;(a==="t-"+s.name||a.startsWith("t-"+s.name+"-")||a.startsWith("t-"+s.name+"."))&&(t=a,n=o[e].textContent,r.push({directive:s,value:n,fullName:t}),"on"!==s.name&&"model"!==s.name||(i=!0))}}for(let{directive:n,value:o,fullName:i}of r)if(n.atNodeEncounter){if(n.atNodeEncounter({node:e,qweb:this,ctx:t,fullName:i,value:o}))return}if("t"!==e.nodeName){let n=this._compileGenericNode(e,t,i);t=t.withParent(n);let o={},s=function(e,t){o[e]=o[e]||[],o[e].push(t)};for(let{directive:o,value:i,fullName:a}of r)o.atNodeCreation&&o.atNodeCreation({node:e,qweb:this,ctx:t,fullName:a,value:i,nodeID:n,addNodeHook:s});if(Object.keys(o).length){t.addLine(`p${n}.hook = {`);for(let e in o){t.addLine(`  ${e}: ${V[e]} => {`);for(let n of o[e])t.addLine(`    ${n}`);t.addLine("  },")}t.addLine("};")}}"pre"===e.nodeName&&(t=t.subContext("inPreTag",!0)),this._compileChildren(e,t);for(let{directive:n,value:o,fullName:i}of r)n.finalize&&n.finalize({node:e,qweb:this,ctx:t,fullName:i,value:o})}_compileGenericNode(e,t,n=!0){if(1!==e.nodeType)throw new Error("unsupported node type");const o=e.attributes,r=[],i=[],s=[];function a(t,n){let o=!1;if("input"===e.nodeName&&"checked"===t){let t=e.getAttribute("type");"checkbox"!==t&&"radio"!==t||(o=!0)}"option"===e.nodeName&&"selected"===t&&(o=!0),"disabled"===t&&U.indexOf(e.nodeName)>-1&&(o=!0),("readonly"===t&&"input"===e.nodeName||"textarea"===e.nodeName)&&(o=!0),o&&i.push(`${t}: _${n}`)}let l="";for(let n=0;n<o.length;n++){let i=o[n].name;const d=o[n].textContent;if(!i.startsWith("t-")&&!e.getAttribute("t-attf-"+i)){const e=t.generateID();if("class"===i){let e=d.trim().split(/\s+/).map(e=>`'${e}':true`).join(",");l=`_${t.generateID()}`,t.addLine(`let ${l} = {${e}};`)}else t.addLine(`var _${e} = '${d}';`),i.match(/^[a-zA-Z]+$/)||(i='"'+i+'"'),r.push(`${i}: _${e}`),a(i,e)}if(i.startsWith("t-att-")){let n=i.slice(6);const o=t.getValue(d);let s=o.id||t.formatExpression(o);if("class"===n)t.rootContext.shouldDefineUtils=!0,s=`utils.toObj(${s})`,l?t.addLine(`Object.assign(${l}, ${s})`):(l=`_${t.generateID()}`,t.addLine(`let ${l} = ${s};`));else{const o=t.generateID();n.match(/^[a-zA-Z]+$/)||(n='"'+n+'"');const i=e.getAttribute(n);if(i){const e=t.generateID();t.addLine(`var _${e} = ${s};`),s=`'${i}' + (_${e} ? ' ' + _${e} : '')`;const o=r.findIndex(e=>e.startsWith(n+":"));r.splice(o,1)}t.addLine(`var _${o} = ${s};`),r.push(`${n}: _${o}`),a(n,o)}}if(i.startsWith("t-attf-")){let n=i.slice(7);n.match(/^[a-zA-Z]+$/)||(n='"'+n+'"');const o=t.interpolate(d),s=t.generateID();let a=e.getAttribute(n);a?t.addLine(`var _${s} = '${a} ' + ${o};`):t.addLine(`var _${s} = ${o};`),r.push(`${n}: _${s}`)}if("t-att"===i){let e=t.generateID();t.addLine(`var _${e} = ${t.formatExpression(d)};`),s.push(e)}}let d=t.generateID(),c=e.getAttribute("t-key");const u=[`key:${c=c?t.formatExpression(c):d}`];r.length+s.length>0&&u.push(`attrs:{${r.join(",")}}`),i.length>0&&u.push(`props:{${i.join(",")}}`),l&&u.push(`class:${l}`),n&&u.push("on:{}"),t.addLine(`let c${d} = [], p${d} = {${u.join(",")}};`);for(let e of s)t.addIf(`_${e} instanceof Array`),t.addLine(`p${d}.attrs[_${e}[0]] = _${e}[1];`),t.addElse(),t.addLine(`for (let key in _${e}) {`),t.indent(),t.addLine(`p${d}.attrs[key] = _${e}[key];`),t.dedent(),t.addLine("}"),t.closeIf();return t.addLine(`var vn${d} = h('${e.nodeName}', p${d}, c${d});`),t.parentNode&&t.addLine(`c${t.parentNode}.push(vn${d});`),d}_compileChildren(e,t){if(e.childNodes.length>0)for(let n of Array.from(e.childNodes))this._compileNode(n,t)}}function Q(e,t,n,o){if("0"===e&&o.caller)return void n._compileNode(o.caller,o);if(e.xml instanceof NodeList){for(let t of Array.from(e.xml))n._compileNode(t,o);return}let r;if("string"==typeof e?(r=`_${o.generateID()}`,o.addLine(`var ${r} = ${o.formatExpression(e)};`)):r=e.id,o.addIf(`${r} || ${r} === 0`),o.escaping)if(o.parentTextNode)o.addLine(`vn${o.parentTextNode}.text += ${r};`);else if(o.parentNode)o.addLine(`c${o.parentNode}.push({text: ${r}});`);else{let e=o.generateID();o.rootContext.rootNode=e,o.rootContext.parentTextNode=e,o.addLine(`var vn${e} = {text: ${r}};`)}else{let e=o.generateID();o.rootContext.shouldDefineUtils=!0,o.addLine(`var frag${e} = utils.getFragment(${r})`);let t=o.generateID();o.addLine(`var p${t} = {hook: {`),o.addLine(`  insert: n => n.elm.parentNode.replaceChild(frag${e}, n.elm),`),o.addLine("}};"),o.addLine(`var vn${t} = h('div', p${t})`),o.addLine(`c${o.parentNode}.push(vn${t});`)}t.childNodes.length&&(o.addElse(),n._compileChildren(t,o)),o.closeIf()}F.utils=H,F.components=Object.create(null),F.DIRECTIVE_NAMES={name:1,att:1,attf:1,key:1},F.DIRECTIVES=[],F.dev=!1,F.utils.getFragment=function(e){const t=document.createElement("template");return t.innerHTML=e,t.content},F.addDirective({name:"esc",priority:70,atNodeEncounter({node:e,qweb:t,ctx:n}){if("t"!==e.nodeName){let o=t._compileGenericNode(e,n);n=n.withParent(o)}return Q(n.getValue(e.getAttribute("t-esc")),e,t,n.subContext("escaping",!0)),!0}}),F.addDirective({name:"raw",priority:80,atNodeEncounter({node:e,qweb:t,ctx:n}){if("t"!==e.nodeName){let o=t._compileGenericNode(e,n);n=n.withParent(o)}return Q(n.getValue(e.getAttribute("t-raw")),e,t,n),!0}}),F.addDirective({name:"set",extraNames:["value"],priority:60,atNodeEncounter({node:e,ctx:t}){const n=e.getAttribute("t-set");let o=e.getAttribute("t-value");if(o){const e=t.formatExpression(o);if(t.variables.hasOwnProperty(n))t.addLine(`${t.variables[n].id} = ${e}`);else{const o=`_${t.generateID()}`;t.addLine(`var ${o} = ${e};`),t.variables[n]={id:o,expr:e}}}else t.variables[n]={xml:e.childNodes};return!0}}),F.addDirective({name:"if",priority:20,atNodeEncounter({node:e,ctx:t}){let n=t.getValue(e.getAttribute("t-if"));return t.addIf(`${t.formatExpression(n)}`),!1},finalize({ctx:e}){e.closeIf()}}),F.addDirective({name:"elif",priority:30,atNodeEncounter({node:e,ctx:t}){let n=t.getValue(e.getAttribute("t-elif"));return t.addLine(`else if (${t.formatExpression(n)}) {`),t.indent(),!1},finalize({ctx:e}){e.closeIf()}}),F.addDirective({name:"else",priority:40,atNodeEncounter:({ctx:e})=>(e.addLine("else {"),e.indent(),!1),finalize({ctx:e}){e.closeIf()}}),F.addDirective({name:"call",priority:50,atNodeEncounter({node:e,qweb:t,ctx:n}){if("t"!==e.nodeName)throw new Error("Invalid tag for t-call directive (should be 't')");const o=e.getAttribute("t-call"),r=t.templates[o];if(!r)throw new Error(`Cannot find template "${o}" (t-call)`);const i=e.cloneNode(!0);i.removeAttribute("t-call");const s=new p;s.nextID=n.rootContext.nextID,t._compileNode(i,s);const a=Object.assign({},n.variables,s.variables);n.rootContext.nextID=s.nextID;const l=Object.keys(s.variables).length>0;if(l){n.addLine("{"),n.indent();for(let e in s.variables){const t=s.variables[e];t.expr&&n.addLine(`let ${t.id} = ${t.expr};`)}}const d=n.subContext("caller",i).subContext("variables",Object.create(a));return t._compileNode(r.elem,d),l&&(n.dedent(),n.addLine("}")),(e.hasAttribute("t-if")||e.hasAttribute("t-else")||e.hasAttribute("t-elif"))&&n.closeIf(),!0}}),F.addDirective({name:"foreach",extraNames:["as"],priority:10,atNodeEncounter({node:e,qweb:t,ctx:n}){n.rootContext.shouldProtectContext=!0,n=n.subContext("inLoop",!0);const o=e.getAttribute("t-foreach"),r=e.getAttribute("t-as");let i=n.generateID();n.addLine(`var _${i} = ${n.formatExpression(o)};`),n.addLine(`if (!_${i}) { throw new Error('QWeb error: Invalid loop expression')}`);let s=n.generateID(),a=n.generateID();n.addLine(`var _${s} = _${a} = _${i};`),n.addIf(`!(_${i} instanceof Array)`),n.addLine(`_${s} = Object.keys(_${i});`),n.addLine(`_${a} = Object.values(_${i});`),n.closeIf(),n.addLine(`var _length${s} = _${s}.length;`),n.addLine(`for (let i = 0; i < _length${s}; i++) {`),n.indent(),n.addToScope(r+"_first","i === 0"),n.addToScope(r+"_last",`i === _length${s} - 1`),n.addToScope(r+"_index","i"),n.addToScope(r,`_${s}[i]`),n.addToScope(r+"_value",`_${a}[i]`);const l=e.cloneNode(!0);let d="t"!==l.tagName&&!l.hasAttribute("t-key");return d||"t"!==e.tagName||(e.hasAttribute("t-component")&&!e.hasAttribute("t-key")&&(d=!0),d||1!==e.children.length||"t"===e.children[0].tagName||e.children[0].hasAttribute("t-key")||(d=!0)),d&&console.warn(`Directive t-foreach should always be used with a t-key! (in template: '${n.templateName}')`),l.removeAttribute("t-foreach"),t._compileNode(l,n),n.dedent(),n.addLine("}"),!0}}),F.addDirective({name:"debug",priority:1,atNodeEncounter({ctx:e}){e.addLine("debugger;")}}),F.addDirective({name:"log",priority:1,atNodeEncounter({ctx:e,value:t}){const n=e.formatExpression(t);e.addLine(`console.log(${n})`)}});const G={prevent:"e.preventDefault();",self:"if (e.target !== this.elm) {return}",stop:"e.stopPropagation();"};function K(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Z(e,t){const n=window.getComputedStyle(e);(function(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map((t,n)=>K(t)+K(e[n])))})((n.transitionDelay||"").split(", "),(n.transitionDuration||"").split(", "))>0?e.addEventListener("transitionend",t,{once:!0}):t()}F.addDirective({name:"on",priority:90,atNodeCreation({ctx:e,fullName:t,value:n,nodeID:o}){e.rootContext.shouldDefineOwner=!0;const[r,...i]=t.slice(5).split(".");if(!r)throw new Error("Missing event name with t-on directive");let s,a=n.replace(/\(.*\)/,function(e){return s=e.slice(1,-1),""});e.addIf(`!context['${a}']`),e.addLine(`throw new Error('Missing handler \\'' + '${a}' + \`\\' when evaluating template '${e.templateName.replace(/`/g,"'")}'\`)`),e.closeIf();let l,d=s?`owner, ${e.formatExpression(s)}`:"owner";i.length>0?(l="function (e) {",l+=i.map(function(e){return G[e]}).join(""),l+=`context['${a}'].call(${d}, e);}`):l=`context['${a}'].bind(${d})`,s?e.addLine(`p${o}.on['${r}'] = ${l};`):(e.addLine(`extra.handlers['${r}' + ${o}] = extra.handlers['${r}' + ${o}] || ${l};`),e.addLine(`p${o}.on['${r}'] = extra.handlers['${r}' + ${o}];`))}}),F.addDirective({name:"ref",priority:95,atNodeCreation({ctx:e,value:t,addNodeHook:n}){const o=`ref${e.generateID()}`;e.addLine(`const ${o} = ${e.interpolate(t)};`),n("create",`context.refs[${o}] = n.elm;`)}}),F.utils.nextFrame=function(e){requestAnimationFrame(()=>requestAnimationFrame(e))},F.utils.transitionInsert=function(e,t){const n=e.elm,o=n.parentElement&&n.parentElement.querySelector(`*[data-owl-key='${e.key}']`);o&&o.remove(),n.classList.add(t+"-enter"),n.classList.add(t+"-enter-active");const r=()=>{n.classList.remove(t+"-enter-active"),n.classList.remove(t+"-enter-to")};this.nextFrame(()=>{n.classList.remove(t+"-enter"),n.classList.add(t+"-enter-to"),Z(n,r)})},F.utils.transitionRemove=function(e,t,n){const o=e.elm;o.setAttribute("data-owl-key",e.key),o.classList.add(t+"-leave"),o.classList.add(t+"-leave-active");const r=()=>{o.classList.remove(t+"-leave-active"),o.classList.remove(t+"-leave-to"),n()};this.nextFrame(()=>{o.classList.remove(t+"-leave"),o.classList.add(t+"-leave-to"),Z(o,r)})},F.addDirective({name:"transition",priority:96,atNodeCreation({ctx:e,value:t,addNodeHook:n}){e.rootContext.shouldDefineUtils=!0;const o={insert:`utils.transitionInsert(vn, '${t}');`,remove:`utils.transitionRemove(vn, '${t}', rm);`};for(let e in o)n(e,o[e])}}),F.addDirective({name:"mounted",priority:97,atNodeCreation({ctx:e,fullName:t,value:n,nodeID:o,addNodeHook:r}){if(e.rootContext.shouldDefineOwner=!0,!t.slice(5))throw new Error("Missing event name with t-on directive");let i,s=n.replace(/\(.*\)/,function(e){return i=e.slice(1,-1),""}),a=`(function () {throw new Error('Missing handler \\'' + '${s}' + \`\\' when evaluating template '${e.templateName.replace(/`/g,"'")}'\`)})()`;i?e.addLine(`extra.mountedHandlers[${o}] = (context['${s}'] || ${a}).bind(owner, ${e.formatExpression(i)});`):e.addLine(`extra.mountedHandlers[${o}] = extra.mountedHandlers[${o}] || (context['${s}'] || ${a}).bind(owner);`),r("insert",`if (context.__owl__.isMounted) { extra.mountedHandlers[${o}](); }`)}}),F.addDirective({name:"slot",priority:80,atNodeEncounter({ctx:e,value:t}){const n=e.generateID();return e.rootContext.shouldDefineOwner=!0,e.addLine(`const slot${n} = this.slots[context.__owl__.slotId + '_' + '${t}'];`),e.addIf(`slot${n}`),e.addLine(`slot${n}(context.__owl__.parent, Object.assign({}, extra, {parentNode: c${e.parentNode}, vars: extra.vars, parent: owner}));`),e.closeIf(),!0}}),F.utils.toNumber=function(e){const t=parseFloat(e);return isNaN(t)?e:t},F.addDirective({name:"model",priority:42,atNodeCreation({ctx:e,nodeID:t,value:n,node:o,fullName:r}){const i=o.getAttribute("type");let s,a=r.includes(".lazy")?"change":"input";if("select"===o.tagName)e.addLine(`p${t}.props = {value: context.state['${n}']};`),a="change",s=`(ev) => {context.state['${n}'] = ev.target.value}`;else if("checkbox"===i)e.addLine(`p${t}.props = {checked: context.state['${n}']};`),s=`(ev) => {context.state['${n}'] = ev.target.checked}`;else if("radio"===i){const r=o.getAttribute("value");e.addLine(`p${t}.props = {checked:context.state['${n}'] === '${r}'};`),s=`(ev) => {context.state['${n}'] = ev.target.value}`,a="click"}else{e.addLine(`p${t}.props = {value: context.state['${n}']};`);let o=`ev.target.value${r.includes(".trim")?".trim()":""}`;r.includes(".number")&&(e.rootContext.shouldDefineUtils=!0,o=`utils.toNumber(${o})`),s=`(ev) => {context.state['${n}'] = ${o}}`}e.addLine(`extra.handlers['${a}' + ${t}] = extra.handlers['${a}' + ${t}] || (${s});`),e.addLine(`p${t}.on['${a}'] = extra.handlers['${a}' + ${t}];`)}});const X=Object.assign({},G,{self:"if (e.target !== vn.elm) {return}"});function Y(e,t){if(!0===t)return!0;if("function"==typeof t)return"object"==typeof e?e instanceof t:typeof e===t.name.toLowerCase();if(t instanceof Array){let n=!1;for(let o=0,r=t.length;o<r;o++)n=n||Y(e,t[o]);return n}let n=Y(e,t.type);if(t.type===Array)for(let o=0,r=e.length;o<r;o++)n=n&&Y(e[o],t.element);if(t.type===Object){const o=t.shape;for(let t in o)n=n&&Y(e[t],o[t])}return n}F.utils.defineProxy=function(e,t){for(let n in t)Object.defineProperty(e,n,{get:()=>t[n],set(e){t[n]=e}})},F.addDirective({name:"component",extraNames:["props","keepalive","asyncroot"],priority:100,atNodeEncounter({ctx:e,value:t,node:n,qweb:o}){e.addLine("//COMPONENT"),e.rootContext.shouldDefineOwner=!0,e.rootContext.shouldDefineQWeb=!0,e.rootContext.shouldDefineParent=!0,e.rootContext.shouldDefineUtils=!0;let r=!!n.getAttribute("t-keepalive"),i=!!n.getAttribute("t-asyncroot");const s=[];let a="";const l=n.attributes,d={};for(let t=0;t<l.length;t++){const n=l[t].name,o=l[t].textContent;if(n.startsWith("t-on-")){const[e,...t]=n.slice(5).split(".");let r,i=o.replace(/\(.*\)/,function(e){return r=e.slice(1,-1),""});s.push([e,t,i,r])}else"t-transition"===n?a=o:n.startsWith("t-")||"class"!==n&&"style"!==n&&(d[n]=e.formatExpression(o))}let c=n.getAttribute("t-key");c&&(c=e.formatExpression(c));let u=Object.keys(d).map(e=>e+":"+d[e]).join(","),h=e.generateID(),p=e.generateID(),f=e.generateID(),_=c&&e.generateID();c&&e.addLine(`let key${_} = ${c};`),e.addLine(`let def${p};`);let m=c?`key${_}`:e.inLoop?`String(-${f} - i)`:String(f);if(e.allowMultipleRoots)if(!c&&e.inLoop){let t=e.generateID();e.addLine(`let template${t} = "_slot_" + String(-${f} - i)`),m=`template${t}`}else m=`"_slot_${m}"`;let v=n.getAttribute("t-ref"),$="",g="";v&&(g=`ref${e.generateID()}`,e.addLine(`const ${g} = ${e.interpolate(v)};`),$=`context.refs[${g}] = w${f};`);let w="";a&&(w=`utils.transitionInsert(vn, '${a}');`);let b=`w${f}.${r?"unmount":"destroy"}();`;v&&!r&&(b+=`delete context.refs[${g}];`),a&&(b=`let finalize = () => {\n          ${b}\n        };\n        utils.transitionRemove(vn, '${a}', finalize);`);let x="",y=n.getAttribute("class"),N=n.getAttribute("t-att-class"),L=n.getAttribute("style"),E=n.getAttribute("t-att-style");if(E){const t=`_${e.generateID()}`;e.addLine(`const ${t} = ${e.formatExpression(E)};`),E=t}let C="";if(y||N||L||E||s.length){if(y){let t=y.trim().split(/\s+/).map(e=>`'${e}':true`).join(",");C=`_${e.generateID()}`,e.addLine(`let ${C} = {${t}};`)}if(N){let t=e.formatExpression(N);"{"===t[0]&&"}"===t[t.length-1]||(t=`utils.toObj(${t})`),y?e.addLine(`Object.assign(${C}, ${t})`):(C=`_${e.generateID()}`,e.addLine(`let ${C} = ${t};`))}let t=s.map(function([t,n,o,r]){let i,s="owner";if(r)if(e.inLoop){let t=e.generateID();e.addLine(`let arg${t} = ${e.formatExpression(r)};`),s=`owner, arg${t}`}else s=`owner, ${e.formatExpression(r)}`;return n.length>0?(i="function (e) {",i+=n.map(function(e){return X[e]}).join(""),i+=`owner['${o}'].call(${s}, e);}`):i=`owner['${o}'].bind(${s})`,`vn.elm.addEventListener('${t}', ${i});`}).join("");const n=E||!!L&&`'${L}'`;x=`vnode.data.hook = {create(_, vn){${n?`vn.elm.style = ${n};`:""}${t}}};`}e.addLine(`let w${f} = ${m} in parent.__owl__.cmap ? parent.__owl__.children[parent.__owl__.cmap[${m}]] : false;`),e.parentNode&&e.addLine(`let _${h}_index = c${e.parentNode}.length;`);let I=!1;if(i)e.addLine(`const patchQueue${f} = [];`),e.addLine(`c${e.parentNode}.push(w${f} && w${f}.__owl__.pvnode || null);`);else if(e.parentNode)e.addLine(`c${e.parentNode}.push(null);`);else{let t=e.generateID();e.rootContext.rootNode=t,I=!0,e.rootContext.shouldDefineResult=!0,e.addLine(`let vn${t} = {};`),e.addLine(`result = vn${t};`)}e.addLine(`let props${f} = {${u}};`),e.addIf(`w${f} && w${f}.__owl__.renderPromise && !w${f}.__owl__.vnode`),e.addIf(`utils.shallowEqual(props${f}, w${f}.__owl__.renderProps)`),e.addLine(`def${p} = w${f}.__owl__.renderPromise;`),e.addElse(),e.addLine(`w${f}.destroy();`),e.addLine(`w${f} = false;`),e.closeIf(),e.closeIf(),e.addIf(`!w${f}`),e.addLine(`let componentKey${f} = ${e.interpolate(t)};`),e.addLine(`let W${f} = context.components && context.components[componentKey${f}] || QWeb.components[componentKey${f}];`),e.addLine(`if (!W${f}) {throw new Error('Cannot find the definition of component "' + componentKey${f} + '"')}`),F.dev&&e.addLine(`utils.validateProps(W${f}, props${f})`),e.addLine(`w${f} = new W${f}(parent, props${f});`),e.addLine(`parent.__owl__.cmap[${m}] = w${f}.__owl__.id;`);const D=[],A=n.childNodes.length;if(A){e.rootContext.shouldTrackScope=!0;for(let t of Object.values(e.variables))t.id&&D.push(t.id);const t=n.cloneNode(!0),r=t.querySelectorAll("[t-set]"),i=o.nextSlotId++;if(e.addLine(`w${f}.__owl__.slotId = ${i};`),r.length)for(let t=0,n=r.length;t<n;t++){const n=r[t];n.parentElement.removeChild(n);const s=n.getAttribute("t-set");n.removeAttribute("t-set");const a=o._compile(`slot_${s}_template`,n,e);o.slots[`${i}_${s}`]=a.bind(o)}if(t.childNodes.length){const n=t.ownerDocument.createElement("t");for(let e of Object.values(t.childNodes))n.appendChild(e);const r=o._compile("slot_default_template",n,e);o.slots[`${i}_default`]=r.bind(o)}}let P="";A&&(P+=e.scopeVars.length?"Object.assign({}, scope)":D.length?"{}":"",D.length&&(P+=`, {${D.join(",")}}`)),e.addLine(`def${p} = w${f}.__prepare(${P});`);let T=`c${e.parentNode}[_${h}_index]=pvnode;`;I&&(T=`utils.defineProxy(vn${e.rootNode}, pvnode);`),e.addLine(`def${p} = def${p}.then(vnode=>{${x}let pvnode=h(vnode.sel, {key: ${m}, hook: {insert(vn) {let nvn=w${f}.__mount(vnode, pvnode.elm);pvnode.elm=nvn.elm;${$}${w}},remove() {},destroy(vn) {${b}}}});${T}w${f}.__owl__.pvnode = pvnode;});`),e.addElse();const O=i?`patchQueue${f}`:"extra.patchQueue";F.dev&&e.addLine(`utils.validateProps(w${f}.constructor, props${f})`),e.addLine(`def${p} = def${p} || w${f}.__updateProps(props${f}, extra.forceUpdate, ${O}${P&&", "+P});`);let k="";return r&&(k=`pvnode.data.hook.insert = vn => {vn.elm.parentNode.replaceChild(w${f}.el,vn.elm);vn.elm=w${f}.el;w${f}.__remount();};`),e.addLine(`def${p} = def${p}.then(()=>{if (w${f}.__owl__.isDestroyed) {return};${E?`w${f}.el.style=${E};`:""}let pvnode=w${f}.__owl__.pvnode;${k}${T}});`),e.closeIf(),C&&e.addLine(`w${f}.__owl__.classObj=${C};`),i?e.addLine(`def${p}.then(w${f}.__applyPatchQueue.bind(w${f}, patchQueue${f}));`):e.addLine(`extra.promises.push(def${p});`),(n.hasAttribute("t-if")||n.hasAttribute("t-else")||n.hasAttribute("t-elif"))&&e.closeIf(),!0}}),F.utils.validateProps=function(e,t){const n=e.props;if(n instanceof Array){for(let o=0,r=n.length;o<r;o++){const r=n[o];if("?"===r[r.length-1])break;if(!t[r])throw new Error(`Missing props '${n[o]}' (component '${e.name}')`)}for(let o in t)if(!n.includes(o)&&!n.includes(o+"?"))throw new Error(`Unknown prop '${o}' given to component '${e.name}'`)}else if(n){for(let o in n){if(void 0===t[o]){if(n[o]&&!n[o].optional)throw new Error(`Missing props '${o}' (component '${e.name}')`);break}if(!Y(t[o],n[o]))throw new Error(`Props '${o}' of invalid type in component '${e.name}'`)}for(let o in t)if(!(o in n))throw new Error(`Unknown prop '${o}' given to component '${e.name}'`)}};const J={};let ee=1;class te{constructor(e,t){this.refs={};const n=this.constructor.defaultProps;n&&(t=this.__applyDefaultProps(t,n)),this.props=t||{};let o=ee++,r=null;e instanceof te?(r=e,this.env=e.env,e.__owl__.children[o]=this):(this.env=e,F.dev&&F.utils.validateProps(this.constructor,this.props),this.env.qweb.on("update",this,()=>{this.__owl__.isMounted&&this.render(!0),this.__owl__.isDestroyed&&this.env.qweb.off("update",this)})),this.__owl__={id:o,vnode:null,isMounted:!1,isDestroyed:!1,parent:r,children:{},cmap:{},renderId:1,renderPromise:null,renderProps:t||null,boundHandlers:{},mountedHandlers:{}}}get el(){return this.__owl__.vnode?this.__owl__.vnode.elm:null}async willStart(){}mounted(){}async willUpdateProps(e){}willPatch(){}patched(e){}willUnmount(){}catchError(e){}async mount(e){const t=await this.__prepare();this.__owl__.isDestroyed||(this.__patch(t),e.appendChild(this.el),document.body.contains(e)&&this.__callMounted())}unmount(){this.__owl__.isMounted&&(this.__callWillUnmount(),this.el.remove())}async render(e=!1,t,n,o){const r=this.__owl__;if(!r.isMounted)return;const i=!t;i&&(t=[]);const s=this.__render(e,t,n,o),a=r.renderId;await s,i&&r.isMounted&&a===r.renderId&&this.__applyPatchQueue(t)}destroy(){const e=this.__owl__;if(!e.isDestroyed){const t=this.el;this.__destroy(e.parent),t&&t.remove()}}shouldUpdate(e){return!0}async updateEnv(e){const t=this.__owl__;t.parent&&t.parent.env===this.env&&(this.env=Object.create(this.env)),Object.assign(this.env,e),t.isMounted&&await this.render(!0)}trigger(e,t){if(this.el){const n=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t});this.el.dispatchEvent(n)}}__destroy(e){const t=this.__owl__;t.isMounted&&(this.willUnmount(),t.isMounted=!1);const n=t.children;for(let e in n)n[e].__destroy(this);if(e){let n=t.id;delete e.__owl__.children[n],t.parent=null}t.isDestroyed=!0,delete t.vnode}__callMounted(){const e=this.__owl__,t=e.children;for(let e in t){const n=t[e];!n.__owl__.isMounted&&this.el.contains(n.el)&&n.__callMounted()}e.isMounted=!0;const n=e.mountedHandlers;for(let e in n)n[e]();try{this.mounted()}catch(e){ne(e,this)}}__callWillUnmount(){this.willUnmount();const e=this.__owl__;e.isMounted=!1;const t=e.children;for(let e in t){const n=t[e];n.__owl__.isMounted&&n.__callWillUnmount()}}async __updateProps(e,t=!1,n,o,r){if(t||this.shouldUpdate(e)){const i=this.constructor.defaultProps;i&&(e=this.__applyDefaultProps(e,i)),await this.willUpdateProps(e),this.props=e,await this.render(t,n,o,r)}}__patch(e){const t=this.__owl__;t.renderPromise=null;const n=t.vnode||document.createElement(e.sel);this.__owl__.classObj&&(e.data.class=Object.assign(e.data.class||{},this.__owl__.classObj)),t.vnode=R(n,e)}__prepare(e,t){const n=this.__owl__;return n.renderProps=this.props,n.renderPromise=this.__prepareAndRender(e,t),n.renderPromise}async __prepareAndRender(e,t){try{await this.willStart()}catch(e){return ne(e,this),Promise.resolve(M("div"))}const n=this.__owl__;if(n.isDestroyed)return Promise.resolve(M("div"));const o=this.env.qweb;if(!this.template){let e=J[o.id];e||(e={},J[o.id]=e);let t=this.constructor,n=t.name,r=e[n];if(r)this.template=r;else{for(;(r=t.name)&&!(r in o.templates)&&t!==te;)t=t.__proto__;if(t===te)throw new Error(`Could not find template for component "${this.constructor.name}"`);e[n]=r,this.template=r}}return n.render=o.render.bind(o,this.template),this.__observeState(),this.__render(!1,[],e,t)}async __render(e=!1,t=[],n,o){const r=this.__owl__;r.renderId++;const i=[],s=[this];let a;r.isMounted&&t.push(s),r.observer&&(r.observer.allowMutations=!1);try{a=r.render(this,{promises:i,handlers:r.boundHandlers,mountedHandlers:r.mountedHandlers,forceUpdate:e,patchQueue:t,scope:n,vars:o})}catch(e){a=r.vnode||M("div"),ne(e,this)}return s.push(a),r.observer&&(r.observer.allowMutations=!0),a.key=r.id,r.renderProps=this.props,r.renderPromise=Promise.all(i).then(()=>a),r.renderPromise}__mount(e,t){const n=this.__owl__;return n.classObj&&(e.data.class=Object.assign(e.data.class||{},n.classObj)),n.vnode=R(t,e),n.parent.__owl__.isMounted&&!n.isMounted&&this.__callMounted(),n.vnode}__remount(){const e=this.__owl__;e.isMounted||(e.isMounted=!0,this.mounted())}__observeState(){if(this.state){const e=this.__owl__;e.observer=new s,e.observer.observe(this.state),e.observer.notifyCB=this.render.bind(this)}}__applyDefaultProps(e,t){e=e?Object.assign({},e):{};for(let n in t)void 0===e[n]&&(e[n]=t[n]);return e}__applyPatchQueue(e){let t=this;try{const n=e.length;for(let o=0;o<n;o++){const n=e[o];t=n[0],n.push(n[0].willPatch())}for(let t=0;t<n;t++){const n=e[t];n[0].__patch(n[1])}for(let o=n-1;o>=0;o--){const n=e[o];t=n[0],n[0].patched(n[2])}}catch(e){ne(e,t)}}}function ne(e,t){let n=!1,o=t.env.qweb,r=t;for(;t&&!(n=t.catchError!==te.prototype.catchError);)r=t,t=t.__owl__.parent;console.error(e),o.trigger("error",e),n?setTimeout(()=>{t.catchError(e)}):r.destroy()}function oe(e){return null!==e&&"object"==typeof e&&e.__owl__?e.__owl__.rev:0}function re(e){return null!==e&&"object"==typeof e&&e.__owl__?e.__owl__.deepRev:0}const ie={};const se="__owl__-router-link",ae='\n    <a  t-att-class="{\'router-link-active\': isActive }"\n        t-att-href="href"\n        t-on-click.prevent="navigate">\n        <t t-slot="default"/>\n    </a>';const le=/\{\{(.*?)\}\}/;function de(e){const t=/\{\{(.*?)\}\}/g,n=[];let o;do{(o=t.exec(e))&&n.push(o[1].split(".")[0])}while(o);return n}function ce(e){const t=e.router.info;let n="history"===t.mode?window.location.pathname:window.location.hash.slice(1);n=n||"/";for(let o of t.routeIds){let r=t.routes[o],i=he(r,n);if(i)return e.router.routeName=r.name,void(e.router.routeParams=i)}e.router.routeName=null,e.router.routeParams={}}function ue(e){const t=e.router.routeName;ce(e),e.router.routeName!==t&&e.qweb.trigger("update")}function he(e,t){if("*"===e.path)return{};const n=e.path.split("/"),o=t.split("/"),r=n.length;if(r!==o.length)return!1;const i={};for(let e=0;e<r;e++){const t=n[e];let r=o[e];const s=t.match(le);if(s){const[e,t]=s[1].split(".");"number"===t&&(r=parseInt(r,10)),i[e]=r}else if(t!==r)return!1}return i}function pe(e,t){return t.to||function(e,t){const n=e.split("/"),o=n.length;for(let e=0;e<o;e++){const o=n[e],r=o.match(le);if(r){const o=r[1].split(".")[0];n[e]=t[o]}}return n.join("/")}(e.router.info.routes[t.route].path,t.params)}const fe={EventBus:t,Observer:s},_e={activate:function(e,t,n){const o={routes:{},routeIds:[],mode:n?n.mode:"hash",destToUrl:pe.bind(null,e)};let r=1;for(let e of t)e.name||(e.name="__route__"+r++),e.component&&F.register("__component__"+e.name,e.component),e.params=de(e.path),o.routes[e.name]=e,o.routeIds.push(e.name);const i={navigate:function(t){const n=pe(e,t);history.pushState({},n,location.origin+n),ue(e)},routeName:null,routeParams:{},info:o};e.router=i,ce(e),addEventListener("popstate",()=>ue(e)),e.qweb.addTemplate(se,ae),F.addDirective(function(e){return{name:"routecomponent",priority:13,atNodeEncounter({node:t}){let n=!0;const o=e.router.info;for(let e of o.routeIds){const r=o.routes[e];if(r.component){const e=t.ownerDocument.createElement("t");e.setAttribute("t-component","__component__"+r.name),e.setAttribute(n?"t-if":"t-elif",`env.router.routeName === '${r.name}'`),n=!1;for(let t of r.params)e.setAttribute(t,`env.router.routeParams.${t}`);t.appendChild(e)}}return t.removeAttribute("t-routecomponent"),!1}}}(e))},Link:class extends te{constructor(){super(...arguments),this.template=se,this.href=this.env.router.info.destToUrl(this.props)}async willUpdateProps(e){this.href=this.env.router.info.destToUrl(e)}get isActive(){return"hash"===this.env.router.info.mode?document.location.hash===this.href:document.location.pathname===this.href}navigate(){this.env.router.navigate(this.props)}}},me={Store:class extends t{constructor(e,t={}){super(),this._commitLevel=0,this.history=[],this._updateId=1,this.debug=t.debug||!1,this.state=e.state||{},this.actions=e.actions,this.mutations=e.mutations,this.env=e.env,this.observer=new s,this.observer.notifyCB=this.__notifyComponents.bind(this),this.observer.allowMutations=!1,this.observer.observe(this.state),this.getters={},this._gettersCache={},this.debug&&this.history.push({state:this.state});const n=["undefined","number","string"];for(let t of Object.entries(e.getters||{})){const e=t[0],o=t[1];this.getters[e]=(t=>0===this._commitLevel&&n.indexOf(typeof t)>=0?(this._gettersCache[e]=this._gettersCache[e]||{},this._gettersCache[e][t]=this._gettersCache[e][t]||o({state:this.state,getters:this.getters},t),this._gettersCache[e][t]):o({state:this.state,getters:this.getters},t))}}dispatch(e,...t){if(!this.actions[e])throw new Error(`[Error] action ${e} is undefined`);const n=this.actions[e]({commit:this.commit.bind(this),dispatch:this.dispatch.bind(this),env:this.env,state:this.state,getters:this.getters},...t);if(n instanceof Promise)return new Promise((e,t)=>{n.then(()=>e()),n.catch(t)})}commit(e,...t){if(!this.mutations[e])throw new Error(`[Error] mutation ${e} is undefined`);this._commitLevel++,this.observer.allowMutations=!0;const n=this.mutations[e].call(null,{commit:this.commit.bind(this),state:this.state,getters:this.getters},...t);return 1===this._commitLevel&&(this.observer.allowMutations=!1,this.debug&&this.history.push({state:this.state,mutation:e,payload:[...t]})),this._commitLevel--,n}async __notifyComponents(){this._updateId++;const e=this._updateId;this._gettersCache={};const t=this.subscriptions.update||[];for(let n=0,o=t.length;n<o;n++){const o=t[n];(!o.owner||o.owner.__owl__.isMounted)&&await o.callback.call(o.owner,e)}}},ConnectedComponent:class extends te{constructor(e,t){super(e,t),this.deep=!0,this.hashFunction=(({storeProps:e},t)=>{let n=this.deep?re:oe;if("__owl__"in e)return n(e);const{currentStoreProps:o}=t;let r=0;for(let i in e){const s=e[i],a=n(s);0===a?s!==o[i]&&(t.didChange=!0):r+=a}return r});const n=this.getStore(this.env),o=this.props||{},r=this.constructor.mapStoreToProps(n.state,o,n.getters),i=Object.assign({},o,r);this.props=i,this.__owl__.ownProps=o,this.__owl__.currentStoreProps=r,this.__owl__.store=n,this.__owl__.storeHash=this.hashFunction({state:n.state,storeProps:r,revNumber:oe,deepRevNumber:re},{currentStoreProps:r})}getStore(e){return e.store}static mapStoreToProps(e,t,n){return{}}__callMounted(){this.__owl__.store.on("update",this,this.__checkUpdate),super.__callMounted()}willUnmount(){this.__owl__.store.off("update",this),super.willUnmount()}async __checkUpdate(e){if(e===this.__owl__.currentUpdateId)return;const t=this.__owl__.ownProps,n=this.constructor.mapStoreToProps(this.__owl__.store.state,t,this.__owl__.store.getters),o={currentStoreProps:this.__owl__.currentStoreProps},r=this.hashFunction({state:this.__owl__.store.state,storeProps:n,revNumber:oe,deepRevNumber:re},o);let i=o.didChange;r!==this.__owl__.storeHash&&(i=!0,this.__owl__.storeHash=r),i&&(this.__owl__.currentStoreProps=n,await this.__updateProps(t,!1))}__updateProps(e,t,n){const o=this.__owl__;o.currentUpdateId=o.store._updateId,o.ownProps!==e&&(o.currentStoreProps=this.constructor.mapStoreToProps(o.store.state,e,o.store.getters)),o.ownProps=e;const r=Object.assign({},e,o.currentStoreProps);return super.__updateProps(r,t,n)}}},ve=Object.freeze({whenReady:function(e){return new Promise(function(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e,!1)}).then(e||function(){})},loadJS:function(e){if(e in ie)return ie[e];const t=new Promise(function(t,n){const o=document.createElement("script");o.type="text/javascript",o.src=e,o.onload=function(){t()},o.onerror=function(){n(`Error loading file '${e}'`)},(document.head||document.getElementsByTagName("head")[0]).appendChild(o)});return ie[e]=t,t},loadTemplates:async function(e){const t=await fetch(e);if(!t.ok)throw new Error("Error while fetching xml templates");let n=await t.text();return n=n.replace(/<!--[\s\S]*?-->/g,"")},escape:function(e){return void 0===e?"":"number"==typeof e?String(e):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&#x27;").replace(/`/g,"&#x60;")},debounce:function(e,t,n){let o;return function(){const r=this,i=arguments,s=n&&!o;clearTimeout(o),o=setTimeout(function(){o=null,n||e.apply(r,i)},t),s&&e.apply(r,i)}}}),$e={};Object.defineProperty($e,"mode",{get:()=>F.dev?"dev":"prod",set(e){if(F.dev="dev"===e,F.dev){const e="https://github.com/odoo/owl/blob/master/doc/tooling.md#development-mode";console.warn(`Owl is running in 'dev' mode.  This is not suitable for production use. See ${e} for more information.`)}else console.log("Owl is now running in 'prod' mode.")}}),e.Component=te,e.QWeb=F,e.__info__=$e,e.core=fe,e.router=_e,e.store=me,e.utils=ve,e.__info__.version="0.17.0",e.__info__.date="2019-07-21T20:29:35.234Z",e.__info__.hash="45d6b87",e.__info__.url="https://github.com/odoo/owl"}(this.owl=this.owl||{});